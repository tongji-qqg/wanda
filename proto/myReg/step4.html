<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>Big Data Management Example</title>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="../plugins/bootstrap-switch/css/bootstrap-switch.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
	<link rel="stylesheet" type="text/css" href="../plugins/datetime/bootstrap-datetimepicker.min.css">
	<link rel="stylesheet" type="text/css" href="../plugins/zTree_v3/css/zTreeStyle/zTreeStyle.css">
	<link rel="stylesheet" type="text/css" href="../css/style.css">
	<style type="text/css">
	.hide{
		display: none;
	}
	</style>
	<style type="text/css">
    .sidebar-fix {} .sidebar-fix>li>a {
        position: relative;
        display: block;
        padding: 2px 2px;
    }
    .table-align-right {
        text-align: right;
        text-overflow: ellipsis;
        font-size: 14px;
        padding: 0px 20px 15px 0;
    }
    .table-align-left {
        text-align: left;
        text-overflow: ellipsis;
        font-size: 14px;
        padding: 0px 0px 15px 0;
    }
    ul.ztree {
        margin-top: 10px;
        background: #f0f6e4;
        overflow-y: scroll;
        overflow-x: auto;
        width: 250px;
        height: 218px;
        background-color: #f5f5f5;
        border: 1px solid Silver;
    }
    </style><style type="text/css">
    .sidebar-fix {} .sidebar-fix>li>a {
        position: relative;
        display: block;
        padding: 2px 2px;
    }
    .table-align-right {
        text-align: right;
        text-overflow: ellipsis;
        font-size: 14px;
        padding: 0px 20px 15px 0;
    }
    .table-align-left {
        text-align: left;
        text-overflow: ellipsis;
        font-size: 14px;
        padding: 0px 0px 15px 0;
    }
    ul.ztree {
        margin-top: 10px;
        background: #f0f6e4;
        overflow-y: scroll;
        overflow-x: auto;
        width: 250px;
        height: 218px;
        background-color: #f5f5f5;
        border: 1px solid Silver;
    }
    </style>
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>

<body>

	<div class="header" style="margin-top:-20px" align="center">
		<div class="row">
			<div class="col-md-1"></div>
			<div class="col-md-2" style="margin:30px 0 0 60px">
				<img src="../images/logo_2.png" height="60px">		
			</div>
			<div class="col-md-5 col-md-offset-1" style="margin-top:30px;">
				<ul class="myheader">
					<li><a href="#" style="background-image: url('../images/btn_on_nav.png');">首页</a></li>
					<li><a href="#">关于</a></li>
					<li><a href="#">平台</a></li>
					<li><a href="#">客户</a></li>
					<li><a href="#">资源</a></li>
				</ul>
			</div>
		</div>
		<div style="float:right;color:#FFF;margin-right:150px;" >
			数据管理员 <img src="../images/ic_user.png" height="20px" alt="icon"><span style="color:#94d500">admin </span>
			<a href="../index.html" class="btn btn-sm" style="background-color:#94d500;color:white">退出</a>
		</div>
	</div>
	<div class="location">
		<ul>
			<li><a href="#">首页 / </a></li>
			<li><a href="#">资产管理服务 / </a></li>
			<li><a href="#">平台管理 / </a></li>
			<li><a href="#">资源视图 / </a></li>
			<li><a href="#">资源地图浏览</a></li>
		</ul>
	</div>
	<div class="container">
		

		<!-- Nav tabs -->
		<ul class="nav nav-tabs" role="tablist">
			<li>
				<a href="step1.html" role="tab">选择资源类型</a>
			</li>
			<li>
				<a href="step2.html" role="tab">设定接入方式</a>
			</li>
			<li>
				<a href="step3.html" role="tab">资源描述</a>
			</li>
			<li  class="active">
				<a href="#step4" role="tab" data-toggle="tab">资源内容</a>
			</li>
		</ul>

		<!-- Tab panes -->
		<div class="tab-content">
			<div class="tab-pane active" id="step4">
				<h1>资源连接信息</h1>
				<hr>
				
				<div id="cuteinfo" class="hide">
					<form class="form-horizontal" role="form">
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">cuteinfo地址</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="地址">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">cuteinfo端口</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="端口">
					    </div>
					  </div>
					</form>
				</div>

				
				<div id="upload" class="hide">
					<form class="form-horizontal" role="form">
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">资源描述文件</label>
					    <div class="col-sm-10">
					      <input type="file" class="form-control" id="inputEmail3" placeholder="名称">
					    </div>
					  </div>
					  <div class="form-group">
					    <div class="col-sm-offset-2 col-sm-10">
					      <a onclick="submit()" class="btn btn-default">确定</a>
					    </div>
					  </div>
					</form>
				</div>

				<div id="fs" class="hide">
					<form class="form-horizontal" role="form">
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">文件服务器地址</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="地址">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">文件服务器端口</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="端口">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">用户名</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="用户名">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">密码</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="密码">
					    </div>
					  </div>
					  
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">建议同步时间</label>
					    <div class="col-sm-4">
							<div class='input-group date'>
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					    <div class="col-sm-4">
							<div class='input-group date'>
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">禁止同步时间</label>
					    <div class="col-sm-4">
							<div class='input-group date'>
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					    <div class="col-sm-4">
							<div class='input-group date'>
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					  </div>

					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">选择文件</label>
					    <div class="col-sm-10">
					      <input type="file" class="form-control" id="inputEmail3" placeholder="密码">
					    </div>
					  </div>
					</form>
					<hr>
					<form class="form-horizontal" role="form">
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">分隔符</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="分隔符">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">文本限定符</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="文本限定符">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">头部</label>
					    <div class="col-sm-2">
					      <input type="checkbox" class="form-control" id="inputEmail3" placeholder="头部">
					    </div>
						<label for="inputEmail3" class="col-sm-2 control-label">头部行数量</label>
					    <div class="col-sm-6">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="头部行数量">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">尾部</label>
					    <div class="col-sm-2">
					      <input type="checkbox" class="form-control" id="inputEmail3" placeholder="尾部">
					    </div>
					    <label for="inputEmail3" class="col-sm-2 control-label">尾部行数量</label>
					    <div class="col-sm-6">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="尾部行数量">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">压缩</label>
					    <div class="col-sm-4">
					      	<select class="form-control">
							    <option value="one">none</option>
							    <option value="two">zip</option>
							    <option value="three">Gzip</option>
							</select>
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">格式</label>
					    <div class="col-sm-4">
					      	<select class="form-control">
							    <option value="one">unix</option>
							    <option value="two">dos</option>
							</select>
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">编码方式</label>
					    <div class="col-sm-4">
					      	<select class="form-control">
							    <option value="one">utf-8</option>
							    <option value="two">utf-16</option>
							    <option value="two">utf-32</option>
							    <option value="two">dos</option>
							</select>
					    </div>
					  </div>
					  <div class="form-group">
					    <div class="col-sm-offset-2 col-sm-10">
					      <a onclick="submit()" class="btn btn-default">确定</a>
					    </div>
					  </div>
					</form>
				</div>

				<div id="db" class="hide">
					<form class="form-horizontal" role="form" id="db-form">
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">数据库主机地址</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="ip" placeholder="ip地址">
					    </div>
					  </div>
					  
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">数据库端口</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="port" placeholder="端口">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">数据库名称</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="dbname" placeholder="schema">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">用户名</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="user" placeholder="用户名">
					    </div>
					  </div>

					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">密码</label>
					    <div class="col-sm-10">
					      <input type="password" class="form-control" id="password" placeholder="密码">
					    </div>
					  </div>

					  
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">建议同步时间</label>
					    <div class="col-sm-4">
							<div class='input-group date' id="good-t1">
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					    <div class="col-sm-4">
							<div class='input-group date' id="good-t2">
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">禁止同步时间</label>
					    <div class="col-sm-4">
							<div class='input-group date' id="bad-t1">
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					    <div class="col-sm-4">
							<div class='input-group date' id="bad-t2">
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					  </div>
					  <div class="form-group">
					    <div class="col-sm-offset-2 col-sm-10">
					      <a onclick="dbSubmit()" class="btn btn-default">测试连接</a>
					    </div>
					  </div>
					  <hr>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">表名及字段</label>
					    <div class="col-sm-10">
					      <div class="row" style="margin-top:30px;">
	                        <div id="treeboxbox_tree" class="col-xs-4">
	                            <ul id="treeLeft" class="ztree"></ul>
	                        </div>


	                        <div id="treeboxbox_tree_sub" class="col-xs-4 col-xs-offset-3">
	                            <ul id="treeRight" class="ztree"></ul>
	                        </div>

	                      </div>
					    </div>
					  </div>
					</form>
					
					
				</div>

				<div id="hbase" class="hide">
					<form class="form-horizontal" role="form">
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">ZooKeeper地址</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="zookeeper地址">
					    </div>
					  </div>
					  
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">ZooKeeper端口</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="端口">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">表命名空间</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="schema">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">表名称</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="schema">
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">用户名</label>
					    <div class="col-sm-10">
					      <input type="text" class="form-control" id="inputEmail3" placeholder="用户名">
					    </div>
					  </div>

					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">密码</label>
					    <div class="col-sm-10">
					      <input type="password" class="form-control" id="inputEmail3" placeholder="密码">
					    </div>
					  </div>

					  
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">建议同步时间</label>
					    <div class="col-sm-4">
							<div class='input-group date'>
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					    <div class="col-sm-4">
							<div class='input-group date'>
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					  </div>
					  <div class="form-group">
					    <label for="inputEmail3" class="col-sm-2 control-label">禁止同步时间</label>
					    <div class="col-sm-4">
							<div class='input-group date'>
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					    <div class="col-sm-4">
							<div class='input-group date'>
			                    <input type='text' class="form-control" />
			                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
			                    </span>
			                </div>
					    </div>
					  </div>
					  <div class="form-group">
					    <div class="col-sm-offset-2 col-sm-10">
					      <a onclick="hbaseSubmit()" class="btn btn-default">测试连接</a>
					    </div>
					  </div>
					  <hr>
					</form>
				</div>
				<div align="center" style="margin-top:50px;">
					<a href="../hekai2/index.html" class="btn btn-success btn-lg">注册资源</a>
				</div>
			</div>
		</div>



		<div class="footer">
			<p>© Bryce 2014</p>
		</div>

	</div>
	<!-- JQuery -->
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

	<!-- Latest compiled and minified JavaScript -->
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../plugins/moment.js"></script>
	<script type="text/javascript" src="../plugins/datetime/bootstrap-datetimepicker.min.js"></script>

	<script type="text/javascript" src="../plugins/zTree_v3/js/jquery.ztree.core-3.5.min.js"></script>
    <script type="text/javascript" src="../plugins/zTree_v3/js/jquery.ztree.excheck-3.5.min.js"></script>
	<script type="text/javascript" src="../js/setting.js"></script>
	<script type="text/javascript">
	$(function () {
        $('.date').datetimepicker({
        	pickDate: false
        });

        var QueryString = function () {
		  // This function is anonymous, is executed immediately and 
		  // the return value is assigned to QueryString!
		  var query_string = {};
		  var query = window.location.search.substring(1);
		  var vars = query.split("&");
		  for (var i=0;i<vars.length;i++) {
		    var pair = vars[i].split("=");
		    	// If first entry with this name
		    if (typeof query_string[pair[0]] === "undefined") {
		      query_string[pair[0]] = pair[1];
		    	// If second entry with this name
		    } else if (typeof query_string[pair[0]] === "string") {
		      var arr = [ query_string[pair[0]], pair[1] ];
		      query_string[pair[0]] = arr;
		    	// If third or later entry with this name
		    } else {
		      query_string[pair[0]].push(pair[1]);
		    }
		  } 
		    return query_string;
		} ();

		if(QueryString.level == "file"){
			$("#upload").removeClass("hide");
		}else{
			if(QueryString.cuteinfo == "yes")
				$('#cuteinfo').removeClass("hide");

			switch(QueryString.type){
				case "hdfs":
				case "excel":
				case "csv":
				case "xml":
				case "json":
				case "txt":
				$('#fs').removeClass("hide");break;

				case "mysql":
				case "oracle":
				case "mssql":
				case "mongo":
				case "redis":
				$("#db").removeClass("hide"); break;

				case "hbase":
				case "hive":
				$("#hbase").removeClass("hide");break;
			}

			//for edit display, do not use it in dev
			if(QueryString.type == "mysql" && QueryString.cuteinfo == "no" 
				&& QueryString.level == "yes" && QueryString.edit == "true"){
				$('#ip').val("10.1.64.95");
				$('#port').val("8000");
				$('#dbname').val("test_database");
				$('#user').val("bryce");
				$('#password').val("whoami");
				$('#good-t1').data('DateTimePicker').setDate("16:00");
				$('#good-t2').data('DateTimePicker').setDate("23:59");

				$('#bad-t1').data('DateTimePicker').setDate("8:00");
				$('#bad-t2').data('DateTimePicker').setDate("16:00");
			}			
		}

		
    });



    function dbSubmit(){

    	var name = ["common", "case", "when",  "replication", "factor", "three", "HDFS", "placement", "policy", "distribute", "across", "racks", "DataNodes", "namespace"];
    	var tables = []
    	for(var i=0;i<8;i++){
    		var table = [];
    		table.push({"tableName":"TB_"+getRandom(name)});
    		var col = [];
    		var size = Math.floor(Math.random() * 15) + 1;
    		for(var j=0;j<size;j++){
    			col.push({"fieldName":"COL_"+getRandom(name)});
    		}
    		table.push(col);
    		tables.push(table);
    	}
    	$("body").trigger("showDBInfo",[tables]);

    	//alert("success!")
    }

    function hbaseSubmit(){
    	alert("success");
    }

    function getRandom(arr){
      return arr[Math.floor((Math.random() * arr.length))];
    }
	</script>
</body>
</html>